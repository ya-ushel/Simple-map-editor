{"version":3,"sources":["C:/Users/Dmitriy/WebstormProjects/FirstProject/server/..\\client\\containers\\Map\\Map.js"],"names":["mapActions","initMapSelectFunc","initMapSelect","selectArray","i","j","Map","props","clientWidth","document","documentElement","clientHeight","initMapping","state","countColumn","Math","floor","countRows","gridArray","test","window","addEventListener","forceUpdate","setState","createGridArray","nextProps","map","source","rows","column","array","initMap","width","height","console","log","updateMapSize","clickHandle","bind","tools","blocks","mapStateToProps","mapReducer","toolsReducer","blocksReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import {connect} from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport * as mapActions from '../../actions/mapActions';\r\nimport React, {Component} from 'react';\r\nimport Grid from './parts/Grid';\r\n\r\n\r\nfunction initMapSelectFunc(initMapSelect) {\r\n    let selectArray = [];\r\n    for(let i = 0;i < 15;i++){\r\n        selectArray[i] = [];\r\n        for(let j = 0;j < 32;j++){\r\n            selectArray[i][j] = 0;\r\n        }\r\n    }\r\n\r\n    initMapSelect(selectArray);\r\n}\r\n\r\nclass Map extends Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        let clientWidth = document.documentElement.clientWidth;\r\n        let clientHeight = document.documentElement.clientHeight;\r\n\r\n        const { initMapping,initMapSelect } = props.mapActions;\r\n        initMapping({\r\n            1: 'grassHalf ',\r\n            2: 'grassHalfLeft ',\r\n            3: 'grassHalfMids ',\r\n        });\r\n\r\n        initMapSelectFunc(initMapSelect);\r\n\r\n        this.state = {\r\n            countColumn: Math.floor(clientWidth / 50),\r\n            countRows: Math.floor(clientHeight / 50),\r\n            gridArray: [],\r\n            test: false,\r\n\r\n        };\r\n    }\r\n\r\n    componentDidMount(){\r\n        window.addEventListener('resize', () => this.forceUpdate())\r\n    }\r\n\r\n    componentWillMount(){\r\n\r\n        this.setState({\r\n            gridArray: this.createGridArray(),\r\n            test: true\r\n        });\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps){\r\n        this.setState({\r\n            gridArray: nextProps.map.source,\r\n        });\r\n        return true;\r\n    }\r\n\r\n    createGridArray(rows = this.state.countRows, column = this.state.countColumn){\r\n        let array = [];\r\n        for(let i = 0;i < rows;i++){\r\n            array[i] = [];\r\n            for(let j = 0;j < column;j++){\r\n\r\n            }\r\n        }\r\n        const { initMap } = this.props.mapActions;\r\n        initMap(array, this.state.countColumn, this.state.countRows);\r\n        return array;\r\n    }\r\n\r\n\r\n    clickHandle(){\r\n        // console.log(this.props.map, 'MAP HANDLECLICK');\r\n    }\r\n\r\n    forceUpdate(){\r\n\r\n        const width = Math.floor(document.documentElement.clientWidth / 50);\r\n        const height = Math.floor(document.documentElement.clientHeight / 50);\r\n\r\n        if( width !== this.state.countColumn || height !== this.state.countRows){\r\n            this.setState({\r\n                countColumn: width,\r\n                countRows: height,\r\n            });\r\n\r\n            console.log('THIS STATE WIDTH', this.state.countColumn);\r\n            const { updateMapSize } = this.props.mapActions;\r\n            updateMapSize(width,height);\r\n        }\r\n    }\r\n\r\n    render(){\r\n\r\n        const map = this.props.map;\r\n        // console.log('RENDER MAP',map);\r\n        return(\r\n            <div className=\"map\" onClick={this.clickHandle.bind(this)} >\r\n                <Grid\r\n                    map={map}\r\n                    mapActions = {this.props.mapActions}\r\n                    tools = {this.props.tools}\r\n                    blocks = {this.props.blocks}\r\n                    initMapSelectFunc = {initMapSelectFunc}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps (state) {\r\n    return {\r\n        map: state.mapReducer,\r\n        tools: state.toolsReducer,\r\n        blocks: state.blocksReducer,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return{\r\n        mapActions: bindActionCreators(mapActions, dispatch)\r\n    };\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Map);"]}