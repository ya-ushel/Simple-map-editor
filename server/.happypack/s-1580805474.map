{"version":3,"sources":["C:/Users/Dmitriy/WebstormProjects/FirstProject/server/..\\client\\containers\\Map\\Map.js"],"names":["mapActions","Map","props","clientWidth","document","documentElement","clientHeight","initMapping","state","countColumn","Math","floor","countRows","gridArray","test","setState","createGridArray","nextProps","map","source","rows","column","array","i","j","initMap","alert","changedMapSource","console","log","clickHandle","bind","resizeHandle","mapStateToProps","mapReducer","mapDispatchToProps","dispatch"],"mappings":";;;;;;;;;;AAAA;;AACA;;AACA;;IAAYA,U;;AACZ;;;;AACA;;;;;;;;;;;;;;IAGMC,G;;;AACF,iBAAYC,KAAZ,EAAkB;AAAA;;AAAA,8GACRA,KADQ;;AAGd,YAAIC,cAAcC,SAASC,eAAT,CAAyBF,WAA3C;AACA,YAAIG,eAAeF,SAASC,eAAT,CAAyBC,YAA5C;;AAJc,YAMNC,WANM,GAMUL,MAAMF,UANhB,CAMNO,WANM;;AAOdA,oBAAY;AACR,eAAG,UADK;AAER,eAAG;AAFK,SAAZ;;AAKA,cAAKC,KAAL,GAAa;AACTC,yBAAaC,KAAKC,KAAL,CAAWL,eAAe,EAA1B,CADJ;AAETM,uBAAWF,KAAKC,KAAL,CAAWR,cAAc,EAAzB,CAFF;AAGTU,uBAAW,EAHF;AAITC,kBAAM;;AAJG,SAAb;AAZc;AAmBjB;;;;6CAGmB;;AAEhB,iBAAKC,QAAL,CAAc;AACVF,2BAAW,KAAKG,eAAL,EADD;AAEVF,sBAAM;AAFI,aAAd;AAIH;;;8CAEqBG,S,EAAU;AAC5B,iBAAKF,QAAL,CAAc;AACVF,2BAAWI,UAAUC,GAAV,CAAcC;AADf,aAAd;AAGA,mBAAO,IAAP;AACH;;;0CAE4E;AAAA,gBAA7DC,IAA6D,uEAAtD,KAAKZ,KAAL,CAAWI,SAA2C;AAAA,gBAAhCS,MAAgC,uEAAvB,KAAKb,KAAL,CAAWC,WAAY;;AACzE,gBAAIa,QAAQ,EAAZ;AACA,iBAAI,IAAIC,IAAI,CAAZ,EAAcA,IAAIF,MAAlB,EAAyBE,GAAzB,EAA6B;AACzBD,sBAAMC,CAAN,IAAW,EAAX;AACA,qBAAI,IAAIC,IAAI,CAAZ,EAAcA,IAAIJ,IAAlB,EAAuBI,GAAvB,EAA2B;AACvBF,0BAAMC,CAAN,EAASC,CAAT,IAAcD,CAAd;AACH;AACJ;AAPwE,gBAQjEE,OARiE,GAQrD,KAAKvB,KAAL,CAAWF,UAR0C,CAQjEyB,OARiE;;AASzEA,oBAAQH,KAAR,EAAe,KAAKd,KAAL,CAAWC,WAA1B,EAAuC,KAAKD,KAAL,CAAWI,SAAlD;AACA,mBAAOU,KAAP;AACH;;;sCAEY;AACT;AACH;;;uCAEa;AACV,gBAAGZ,KAAKC,KAAL,CAAWP,SAASC,eAAT,CAAyBC,YAAzB,GAAwC,EAAnD,MAA2D,KAAKE,KAAL,CAAWI,SAAzE,EACIc,MAAM,GAAN;AACP;;;iCAEO;;AAEJ,gBAAMR,MAAM,KAAKhB,KAAL,CAAWgB,GAAvB;AAFI,gBAGIS,gBAHJ,GAGwB,KAAKzB,KAAL,CAAWF,UAHnC,CAGI2B,gBAHJ;;AAIJC,oBAAQC,GAAR,CAAY,YAAZ,EAAyBX,GAAzB;AACA,mBACI;AAAA;AAAA,kBAAK,WAAU,KAAf,EAAqB,SAAS,KAAKY,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAA9B,EAA2D,UAAU,KAAKC,YAA1E;AACI,gEAAM,KAAKd,GAAX,EAAgB,YAAcS,gBAA9B;AADJ,aADJ;AAKH;;;;;;AAGL,SAASM,eAAT,CAA0BzB,KAA1B,EAAiC;AAC7B,WAAO;AACHU,aAAKV,MAAM0B;AADR,KAAP;AAGH;;AAED,SAASC,kBAAT,CAA4BC,QAA5B,EAAsC;AAClC,WAAM;AACFpC,oBAAY,+BAAmBA,UAAnB,EAA+BoC,QAA/B;AADV,KAAN;AAGH;;kBAGc,yBAAQH,eAAR,EAAyBE,kBAAzB,EAA6ClC,GAA7C,C","sourcesContent":["import {connect} from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport * as mapActions from '../../actions/mapAction';\r\nimport React, {Component} from 'react';\r\nimport Grid from './parts/Grid';\r\n\r\n\r\nclass Map extends Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        let clientWidth = document.documentElement.clientWidth;\r\n        let clientHeight = document.documentElement.clientHeight;\r\n\r\n        const { initMapping } = props.mapActions;\r\n        initMapping({\r\n            0: 'cakeHalf',\r\n            1: 'cake'\r\n        });\r\n\r\n        this.state = {\r\n            countColumn: Math.floor(clientHeight / 50),\r\n            countRows: Math.floor(clientWidth / 50),\r\n            gridArray: [],\r\n            test: false,\r\n\r\n        };\r\n    }\r\n\r\n\r\n    componentWillMount(){\r\n\r\n        this.setState({\r\n            gridArray: this.createGridArray(),\r\n            test: true\r\n        });\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps){\r\n        this.setState({\r\n            gridArray: nextProps.map.source,\r\n        });\r\n        return true;\r\n    }\r\n\r\n    createGridArray(rows = this.state.countRows, column = this.state.countColumn){\r\n        let array = [];\r\n        for(let i = 0;i < column;i++){\r\n            array[i] = [];\r\n            for(let j = 0;j < rows;j++){\r\n                array[i][j] = i;\r\n            }\r\n        }\r\n        const { initMap } = this.props.mapActions;\r\n        initMap(array, this.state.countColumn, this.state.countRows);\r\n        return array;\r\n    }\r\n\r\n    clickHandle(){\r\n        // console.log(this.props.map, 'MAP HANDLECLICK');\r\n    }\r\n\r\n    resizeHandle(){\r\n        if(Math.floor(document.documentElement.clientHeight / 50) !== this.state.countRows)\r\n            alert('1');\r\n    }\r\n\r\n    render(){\r\n\r\n        const map = this.props.map;\r\n        const { changedMapSource} = this.props.mapActions;\r\n        console.log('RENDER MAP',map);\r\n        return(\r\n            <div className=\"map\" onClick={this.clickHandle.bind(this)} onresize={this.resizeHandle}>\r\n                <Grid map={map} mapActions = {changedMapSource}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps (state) {\r\n    return {\r\n        map: state.mapReducer,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return{\r\n        mapActions: bindActionCreators(mapActions, dispatch)\r\n    };\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Map);"]}