{"version":3,"sources":["C:/Users/Dmitriy/WebstormProjects/FirstProject/server/..\\client\\reducers\\mapReducer.js"],"names":["map","initialState","source","width","height","mapping","select","selectedItem","state","action","type","payload","newSource","x","y","elem","newWidth","newHeight","newSelection","push","newCreateSource","generationWidth","length","generationHeight","console","log","i","j"],"mappings":";;;;;;;;;;kBAoBwBA,G;;AApBxB;;AAWA,IAAMC,eAAe;AACjBC,YAAQ,EADS;AAEjBC,WAAO,CAFU;AAGjBC,YAAQ,CAHS;AAIjBC,yBAJiB;AAKjBC,YAAQ,KALS;AAMjBC,kBAAc;AANG,CAArB;;AASe,SAASP,GAAT,GAA2C;AAAA,QAA9BQ,KAA8B,uEAAtBP,YAAsB;AAAA,QAARQ,MAAQ;;AACtD,YAAQA,OAAOC,IAAf;AACI;AAAe;AACX,oCACOF,KADP;AAEIN,4BAAQO,OAAOE,OAAP,CAAeT,MAF3B;AAGIC,2BAAOM,OAAOE,OAAP,CAAeR,KAH1B;AAIIC,4BAAQK,OAAOE,OAAP,CAAeP;AAJ3B;AAMH;AACD;AACI,gBAAIQ,YAAYJ,MAAMN,MAAtB;AACAU,sBAAUH,OAAOI,CAAjB,EAAoBJ,OAAOK,CAA3B,IAAgCL,OAAOM,IAAvC;AACA,gCACOP,KADP;AAEIN,wBAAQU;AAFZ;AAIJ;AACI,gCACOJ,KADP;AAEIL,uBAAOM,OAAOE,OAAP,CAAeK,QAF1B;AAGIZ,wBAAQK,OAAOE,OAAP,CAAeM;AAH3B;AAKJ;AACI,gCACOT,KADP;AAEIF,wBAAQG,OAAOE;AAFnB;AAIJ;AACI,gBAAIO,eAAeV,MAAMD,YAAzB;AACAW,yBAAaC,IAAb,CAAkB,EAACN,GAAGJ,OAAOI,CAAX,EAAcC,GAAGL,OAAOK,CAAxB,EAAlB;AACA,gCACON,KADP;AAEID,8BAAcW;AAFlB;AAIJ;AACI,gCACOV,KADP;AAEID,8BAAcE,OAAOE;AAFzB;AAIJ,aAAK,mBAAL;AACI,gBAAIS,kBAAkBZ,MAAMN,MAA5B;AACA,gBAAImB,kBAAkBZ,OAAOP,MAAP,CAAcoB,MAApC;AACA,gBAAIC,mBAAmBd,OAAOP,MAAP,CAAc,CAAd,EAAiBoB,MAAxC;AACAE,oBAAQC,GAAR,CAAYF,gBAAZ,EAA6BF,eAA7B;AACA,iBAAK,IAAIK,IAAIjB,OAAOI,CAApB,EAAuBa,IAAIlB,MAAMJ,MAAjC,EAAyCsB,GAAzC,EAA8C;AAC1C,qBAAK,IAAIC,IAAIlB,OAAOK,CAApB,EAAuBa,IAAInB,MAAML,KAAjC,EAAwCwB,GAAxC,EAA6C;AACzCP,oCAAgBM,CAAhB,EAAmBC,CAAnB,IAAwB,GAAxB;AACH;AACJ;AACD,gCACOnB,KADP;AAEIN,wBAAQkB;AAFZ;AAIJ;AACI,mBAAOZ,KAAP;AAtDR;AAwDH,C","sourcesContent":["import {\r\n    MAP_INIT,\r\n    CHANGED_MAP_SOURCE,\r\n    MAPPING_INIT,\r\n    UPDATE_MAP_SIZE,\r\n    SET_SELECT,\r\n    ADD_SELECTION,\r\n    RESET_SELECTIONS,\r\n    MAPPING,\r\n} from '../constants/Map';\r\n\r\nconst initialState = {\r\n    source: [],\r\n    width: 0,\r\n    height: 0,\r\n    mapping: MAPPING,\r\n    select: false,\r\n    selectedItem: []\r\n};\r\n\r\nexport default function map(state = initialState, action) {\r\n    switch (action.type) {\r\n        case MAP_INIT: {\r\n            return {\r\n                ...state,\r\n                source: action.payload.source,\r\n                width: action.payload.width,\r\n                height: action.payload.height\r\n            };\r\n        }\r\n        case CHANGED_MAP_SOURCE:\r\n            let newSource = state.source;\r\n            newSource[action.x][action.y] = action.elem;\r\n            return {\r\n                ...state,\r\n                source: newSource\r\n            };\r\n        case UPDATE_MAP_SIZE:\r\n            return {\r\n                ...state,\r\n                width: action.payload.newWidth,\r\n                height: action.payload.newHeight\r\n            };\r\n        case SET_SELECT:\r\n            return {\r\n                ...state,\r\n                select: action.payload\r\n            };\r\n        case ADD_SELECTION:\r\n            let newSelection = state.selectedItem;\r\n            newSelection.push({x: action.x, y: action.y});\r\n            return {\r\n                ...state,\r\n                selectedItem: newSelection\r\n            };\r\n        case RESET_SELECTIONS:\r\n            return {\r\n                ...state,\r\n                selectedItem: action.payload\r\n            };\r\n        case 'CREATE_STRUCTURES':\r\n            let newCreateSource = state.source;\r\n            let generationWidth = action.source.length;\r\n            let generationHeight = action.source[0].length;\r\n            console.log(generationHeight,generationWidth);\r\n            for (let i = action.x; i < state.height; i++) {\r\n                for (let j = action.y; j < state.width; j++) {\r\n                    newCreateSource[i][j] = '4';\r\n                }\r\n            }\r\n            return {\r\n                ...state,\r\n                source: newCreateSource\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}"]}